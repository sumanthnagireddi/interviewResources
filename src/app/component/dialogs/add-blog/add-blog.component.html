<!-- Header -->
<div class="pb-6">

  <h2 class="text-xl font-semibold flex items-center gap-2 text-slate-800 dark:text-white">
    <span class="material-symbols-outlined cursor-pointer" [routerLink]="'/blogs'">arrow_back</span>Add New Blog</h2>
  <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
    Please fill in the details of the new blog you want to add.
  </p>

  <!-- Steps -->
  <div class="mt-4 flex items-center gap-4">
    <div class="flex items-center gap-2">
      <span class="flex h-7 w-7 items-center justify-center rounded-full text-sm font-medium"
        [ngClass]="step === 1 ? 'bg-accent text-white' : 'bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300'">
        1
      </span>
      <span class="text-sm font-medium text-slate-700 dark:text-slate-300">Details</span>
    </div>

    <div class="h-px w-8 bg-slate-300 dark:bg-slate-600"></div>

    <div class="flex items-center gap-2">
      <span class="flex h-7 w-7 items-center justify-center rounded-full text-sm font-medium"
        [ngClass]="step === 2 ? 'bg-accent text-white' : 'bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300'">
        2
      </span>
      <span class="text-sm font-medium text-slate-700 dark:text-slate-300">Content</span>
    </div>
  </div>
</div>

<!-- STEP 1 : DETAILS -->
<div *ngIf="step === 1" class="w-full my-4 max-w-4xl space-y-4" [formGroup]="form">
  <!-- Title -->
  <div>
    <label class="block mb-1 text-sm font-medium text-slate-600 dark:text-slate-300">Blog Title</label>
    <input type="text" formControlName="title" placeholder="Enter blog title" class="w-full rounded-md border border-slate-300 dark:border-slate-600 px-3 py-2 text-sm text-slate-700 dark:text-slate-200
             bg-white dark:bg-slate-800 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm
             focus:border-accent focus:ring-accent" />
  </div>

  <!-- Description -->
  <div>
    <label class="block mb-1 text-sm font-medium text-slate-600 dark:text-slate-300">Description</label>
    <input type="text" formControlName="description" placeholder="Short summary of the blog" class="w-full rounded-md border border-slate-300 dark:border-slate-600 px-3 py-2 text-sm text-slate-700 dark:text-slate-200
             bg-white dark:bg-slate-800 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm
             focus:border-accent focus:ring-accent" />
  </div>

  <!-- Status -->
  <div>
    <label class="block mb-1 text-sm font-medium text-slate-600 dark:text-slate-300">Status</label>
    <select formControlName="status" class="w-full rounded-md border border-slate-300 dark:border-slate-600 px-3 py-2 text-sm text-slate-700 dark:text-slate-200
             bg-white dark:bg-slate-800 shadow-sm focus:border-accent focus:ring-accent">
      <option value="DRAFT">Draft</option>
      <option value="SCHEDULED">Scheduled</option>
      <option value="PUBLISHED">Published</option>
    </select>
  </div>

  <!-- Scheduled Date -->
  <div *ngIf="form.get('status')?.value === 'SCHEDULED'">
    <label class="block mb-1 text-sm font-medium text-slate-600 dark:text-slate-300">
      Schedule Publish Date & Time
    </label>
    <input type="datetime-local" formControlName="publishedAt" class="w-full rounded-md border border-slate-300 dark:border-slate-600 px-3 py-2 text-sm text-slate-700 dark:text-slate-200
             bg-white dark:bg-slate-800 shadow-sm focus:border-accent focus:ring-accent" />
    <p class="mt-1 text-xs text-slate-500 dark:text-slate-400">
      The blog will be published automatically at the selected time.
    </p>
  </div>

  <!-- Category -->
  <div>
    <label class="block mb-1 text-sm font-medium text-slate-600 dark:text-slate-300">Category</label>
    <select formControlName="category" class="w-full rounded-md border border-slate-300 dark:border-slate-600 px-3 py-2 text-sm text-slate-700 dark:text-slate-200
             bg-white dark:bg-slate-800 shadow-sm focus:border-accent focus:ring-accent">
      <option value="">Select category</option>
      <option *ngFor="let cat of categories" [value]="cat.name">
        {{ cat.name }}
      </option>
    </select>
  </div>

  <!-- Tags -->
  <div>
    <label class="block mb-1 text-sm font-medium text-slate-600 dark:text-slate-300">Tags</label>
    <input type="text" formControlName="tags" placeholder="e.g.. angular, ngrx, signals" class="w-full rounded-md border border-slate-300 dark:border-slate-600 px-3 py-2 text-sm text-slate-700 dark:text-slate-200
             bg-white dark:bg-slate-800 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm
             focus:border-accent focus:ring-accent" />
    <p class="mt-1 text-xs text-slate-500 dark:text-slate-400">
      Separate tags with commas
    </p>
  </div>
</div>

<!-- STEP 2 : CONTENT -->
<div *ngIf="step === 2" class="max-w-4xl mt-4">
  <label class="block mb-2 text-sm font-medium text-slate-600 dark:text-slate-300">
    Blog Content
  </label>
  <app-editor #editor [data]="'<p>Add your content here</p>'" [ShowSaveButton]="false" [mode]="'edit'" (content)="onEditorContent($event)"></app-editor>
</div>

<!-- Footer Actions -->
<div class="mt-6 flex max-w-4xl justify-between">
  <button *ngIf="step === 2" type="button" (click)="step = 1"
    class="rounded-md border border-slate-300 dark:border-slate-600 px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700">
    Back
  </button>

  <div class="ml-auto flex gap-3">
    <button *ngIf="step === 1" type="button" (click)="step = 2"
      class="btn-accent rounded-md px-4 py-2 text-sm font-semibold text-white">
      Next
    </button>

    <button *ngIf="step === 2" type="button" (click)="submit()"
      class="btn-accent rounded-md px-4 py-2 text-sm font-semibold text-white">
      Publish Blog
    </button>

    <button type="button" (click)="onCloseDialog()"
      class="rounded-md border border-slate-300 dark:border-slate-600 px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700">
      Cancel
    </button>
  </div>
</div>
