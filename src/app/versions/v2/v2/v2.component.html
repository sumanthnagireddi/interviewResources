<div class="flex h-full ">
  <div *ngIf="showSidebar" class="max-h-screen sticky top-0 overflow-y-auto w-[18vw] sm:block hidden">
    <app-sidebar-v2 (sidebarState)="manageSidebar($event)" (emitContent)="receiveContent($event)"></app-sidebar-v2>
  </div>

  <!-- Mobile overlay sidebar -->
  <div *ngIf="showSidebar" class="fixed inset-0 z-50 bg-black bg-opacity-40 flex sm:hidden">
    <div class="bg-white w-full max-w-xs h-full overflow-y-auto shadow-lg relative">
      <app-sidebar-v2 (sidebarState)="manageSidebar($event)" (emitContent)="receiveContent($event)"></app-sidebar-v2>
    </div>
    <!-- Click outside to close -->
    <div class="flex-1" (click)="manageSidebar(false)"></div>
  </div>

  <div class="flex-1 sm:ml-6 max-h-screen overflow-y-auto bg-gray-50">
    <div class="p-6">
      <div class="flex gap-2 ">
        <div *ngIf="!showSidebar" class="pt-2">
          <app-collapse-icon (sidebarState)="manageSidebar($event)"></app-collapse-icon>
        </div>
        <div>
          <h1 class="text-2xl font-bold">{{(currentItem?.name)?(currentItem?.name):'Welcome to V2 Component'}}</h1>
          <span class="text-gray-700"></span>
        </div>
      </div>
      <ng-container *ngIf="isReady; else loader">
        <div *ngIf="contentAvailable; else notFound" class="mt-6">
          <app-editor
            (content)="saveContent($event)"
            [mode]="mode()"
            [data]="data()">
          </app-editor>
        </div>
      </ng-container>

      <ng-template #loader>
        <app-loader></app-loader>
      </ng-template>

      <ng-template #notFound>
        <div class="mt-6">
          <main class="grid min-h-full place-items-center bg-white px-6 py-24 sm:py-32 lg:px-8">
            <div class="text-center">
              <p class="text-base font-semibold text-indigo-600">404</p>
              <h1 class="mt-4 text-5xl font-semibold tracking-tight text-balance text-gray-900 sm:text-7xl">
                Page not found
              </h1>
              <p class="mt-6 text-lg font-medium text-pretty text-gray-500 sm:text-xl/8">
                Sorry, we couldn’t find the page you’re looking for.
              </p>
              <div class="mt-10 flex items-center justify-center gap-x-6">
                <a
                  routerLink="/"
                  class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                  Go back home
                </a>
                <a href="#" class="text-sm font-semibold text-gray-900">
                  Contact support <span aria-hidden="true">&rarr;</span>
                </a>
              </div>
            </div>
          </main>
        </div>
      </ng-template>

    </div>
  </div>

  <!-- Desktop headings sidebar -->
  <div *ngIf="isReady" class="w-[20vw] sm:block hidden border-e border-gray-100 bg-white">
    <ul class="mt-6 space-y-1 ">
      <li *ngFor="let item of headings; let i = index">
        <a (click)="scrollToHeading(item)"
          class="block cursor-pointer rounded-lg px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-700">
          {{item}}
        </a>
      </li>
    </ul>
  </div>
</div>
